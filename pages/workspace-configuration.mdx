---
title: Workspace Configuration Guide
---

# Workspace Configuration Guide

## Overview

The Finarkein API is multi-tenant, meaning each workspace has its own set of credentials and configuration parameters. This guide explains how to configure and test APIs for your specific workspace.

## Prerequisites

Before you can test the API, you need to obtain the following from your administrator:

### 1. OAuth2 Credentials

Each workspace has unique OAuth 2.0 credentials:

- **Client ID**: Format is typically `client-{workspace}-{unique-id}`
  - Example: `client-tsfsl-03d952d6`
- **Client Secret**: A secure secret key for your workspace
  - Example: `your-secret-key-here`
- **Token URL**: The OAuth2 token endpoint
  - Default: `https://id.finarkein.com/auth/realms/fin-dev/protocol/openid-connect/token`

### 2. Workspace Parameters

- **Workspace ID**: Your unique workspace identifier
  - Example: `tsfsl`, `demo`, `production`
- **Nerv Flow IDs**:
  - **One-time flow ID** (`nerv.flow.id`): For single consent flows
    - Example: `376b71fe-009b-4154-850c-fa0eb65b4d5a`
  - **Recurring flow ID** (`recurring.nerv.flow.id`): For recurring consent flows
    - Example: `2627928c-03d4-4fb4-a1fd-c2e1a42723cc`

## How to Test APIs in Zudoku

### Step 1: Navigate to API Reference

1. Log in to the documentation portal (Clerk authentication)
2. Click on **API Reference** in the navigation menu

### Step 2: Authorize with Your Workspace Credentials

1. Click the **Authorize** button (lock icon) in the top-right corner of the API Reference page

2. You'll see multiple authentication options:
   - **basicAuth**: For manual token generation
   - **oauth2 (OAuth2)**: Automatic token exchange
   - **bearerAuth**: For manually entering a token

3. **Option A: Using basicAuth (Recommended for First-Time Setup)**
   ```
   1. Select "basicAuth"
   2. Username: Enter your Client ID
      Example: client-tsfsl-03d952d6
   3. Password: Enter your Client Secret
      Example: your-secret-key
   4. Click "Authorize"
   ```

4. **Option B: Using OAuth2**
   ```
   1. Select "oauth2"
   2. Zudoku will prompt for credentials
   3. Enter your Client ID and Client Secret
   4. Click "Authorize"
   ```

### Step 3: Generate Access Token (if using basicAuth)

1. In the API Reference, navigate to the **Authentication** section
2. Find the **POST /token** endpoint
3. Click "Try it out"
4. The request body should have:
   ```json
   {
     "grant_type": "client_credentials"
   }
   ```
5. Click **Execute**
6. Copy the `access_token` from the response
7. Go back to **Authorize** > **bearerAuth**
8. Paste the token and click **Authorize**

### Step 4: Update Request Parameters

When testing endpoints, remember to update these parameters with your workspace-specific values:

#### Workspace Parameter
- **Default shown**: `tsfsl`
- **Your value**: Replace with your actual workspace ID
- **Where to change**: In the "Parameters" section of each endpoint

#### Flow ID Parameter
- **Default shown**: `376b71fe-009b-4154-850c-fa0eb65b4d5a`
- **Your value**: Use your workspace-specific flow ID
  - For one-time flows: Use `nerv.flow.id`
  - For recurring flows: Use `recurring.nerv.flow.id`
- **Where to change**: In the "Parameters" section when testing Nerv endpoints

### Step 5: Execute API Calls

1. Fill in all required parameters
2. Update the request body if needed
3. Click **Execute**
4. View the response

## Example: Testing "New Run" Endpoint

Here's a complete example for testing the New Run endpoint:

### Parameters
```
workspace: your-workspace-id (e.g., tsfsl)
flowId: your-flow-id (e.g., 376b71fe-009b-4154-850c-fa0eb65b4d5a)
```

### Request Body
```json
{
  "consentTemplateId": "f2f86ccb-60fe-4ec4-b58d-3f90a4559938",
  "customerMobileNumber": "9881908250",
  "redirectUrl": "https://dev.fnrk.in/o/your-workspace/thank-you",
  "webhook": {
    "addOnParams": {
      "application": "APP091234",
      "customerSegment": "hni",
      "other-key-1": "other-value-1"
    },
    "consentStatus": "https://your-webhook-url/consent-status",
    "dataPush": "https://your-webhook-url/data-push",
    "flowRunStatus": "https://your-webhook-url/flow-run-status"
  }
}
```

### Expected Response
```json
{
  "redirectUrl": "https://dev.fnrk.in/v2/bf75efbb-5604-42d8-8163-f29cc7a0f5c6",
  "requestId": "bf75efbb-5604-42d8-8163-f29cc7a0f5c6"
}
```

## Environment Variables for Local Development

If you're running the documentation locally, create a `.env` file with your workspace credentials:

```bash
# Clerk Authentication (for documentation access)
CLERK_JWKS_URI=https://your-clerk-domain.accounts.dev/.well-known/jwks.json
CLERK_SECRET_KEY=sk_test_your_clerk_secret

# OAuth2 Configuration (for API testing)
AUTH_TOKEN_URL=https://id.finarkein.com/auth/realms/fin-dev/protocol/openid-connect/token
AUTH_CLIENT_ID=client-your-workspace-unique-id
AUTH_CLIENT_SECRET=your-secret-key

# API Configuration
FACTORY_API=https://api.finarkein.in/factory/v1
workspace=your-workspace-id

# Nerv Flow IDs
nerv.flow.id=your-onetime-flow-id
recurring.nerv.flow.id=your-recurring-flow-id
```

## Troubleshooting

### Authentication Fails (401 Unauthorized)

**Cause**: Invalid Client ID or Client Secret

**Solution**:
1. Verify your credentials with your administrator
2. Ensure there are no extra spaces in the credentials
3. Try re-authorizing with fresh credentials

### Token Expires

**Cause**: Bearer tokens expire after 24 hours (86400 seconds)

**Solution**:
1. Click **Authorize** again
2. Generate a new token using the `/token` endpoint
3. Update the bearerAuth with the new token

### Wrong Workspace or Flow ID

**Cause**: Using default example values instead of your workspace values

**Solution**:
1. Check the "Parameters" section before clicking Execute
2. Replace `tsfsl` with your workspace ID
3. Replace the example flow ID with your actual flow ID
4. Update the `redirectUrl` to use your workspace

### CORS Errors

**Cause**: Browser blocking requests to the API

**Solution**:
- This is expected in some environments
- The API calls should work fine from server-side applications
- For testing in Zudoku, ensure you're on the correct domain

## Need Help?

If you're stuck or need your workspace credentials, contact your administrator or Finarkein support.

### What to Request

- Your workspace ID
- OAuth2 Client ID and Client Secret
- Nerv flow IDs (one-time and recurring)
- Any workspace-specific configuration

## Next Steps

Once you've successfully configured and tested your workspace:

1. Integrate the API into your application
2. Implement proper token caching and refresh logic
3. Set up webhooks for real-time notifications
4. Review the API response schemas for data processing

Happy testing! ðŸš€
